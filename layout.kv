ScreenManager:
    id:src_manager

    Main_screen:
        name: 'main_screen'

    Feedback_screen:
        name: 'feedback_screen'

    Login_screen:
        name: 'login_screen'

    Config_screen:
        name: 'config_screen'
    
    Statistics_screen:
        name: 'statistics_screen'

    Feedback_view_screen:
        name: 'feedback_view_screen'

    Feedback_consultation_screen:
        name: 'feedback_consultation_screen'



<Main_Screen>:
    name: 'main_screen'
    FitImage:
        source: "assets/program/background.jpg"
        # change the size of the image
        size_hint: 1, 1
        # change the position of the image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}



    # create a button on the top left of the screen with the name config
    MDBoxLayout:
        orientation: "vertical"
        padding: "8dp"
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        

        MDIconButton:
            icon: "cog"
            # to the left of the screen
            on_release: app.root.current = 'login_screen'

        MDCard:
            size_hint: 0.85, 0.85
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            orientation: 'vertical'
            padding: 10
            #make the card a bit transparent
            # opacity: 0.3 use alpha instead
            md_bg_color: 1, 1, 1, 0.3


            MDBoxLayout:
                orientation: "vertical"
                
                padding: "8dp"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                MDLabel:
                    text: "Fast Feedback"
                    halign: "center"
                    font_style: "H4"

                MDBoxLayout:
                    orientation: "vertical"
                    padding: 10

                    MDLabel:
                        id: dish_name_vegetable
                        text: "Vegetable"
                        halign: "center"
                        font_style: "H5"

                    MDBoxLayout:
                        orientation: "horizontal"
                        MDIconButton:
                            #text: ":("
                            icon: "emoticon-sad"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_vegetable.text, -1)
                            md_bg_color: 1, 0, 0, 0.5

                        MDIconButton:
                            #text: ":|"
                            icon: "emoticon-neutral"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_vegetable.text, 0)
                            md_bg_color: 1, 1, 0, 0.5

                        MDIconButton:
                            #text: ":)"
                            icon: "emoticon-happy"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_vegetable.text, 1)
                            md_bg_color: 0, 1, 0, 0.5


                MDBoxLayout:
                    orientation: "vertical"
                    padding: 10

                    MDLabel:
                        id: dish_name_meat
                        text: "Meat"
                        halign: "center"
                        font_style: "H5"

                    MDBoxLayout:
                        orientation: "horizontal"
                        MDIconButton:
                            #text: ":("
                            icon: "emoticon-sad"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_meat.text, -1)
                            md_bg_color: 1, 0, 0, 0.5

                        MDIconButton:
                            #text: ":|"
                            icon: "emoticon-neutral"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_meat.text, 0)
                            md_bg_color: 1, 1, 0, 0.5

                        MDIconButton:
                            #text: ":)"
                            icon: "emoticon-happy"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_meat.text, 1)
                            md_bg_color: 0, 1, 0, 0.5

                MDBoxLayout:
                    orientation: "vertical"
                    padding: 10

                    MDLabel:
                        id: dish_name_dessert
                        text: "Dessert"
                        halign: "center"
                        font_style: "H5"

                    MDBoxLayout:
                        orientation: "horizontal"
                        MDIconButton:
                            #text: ":("
                            icon: "emoticon-sad"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_dessert.text, -1)
                            md_bg_color: 1, 0, 0, 0.5


                        MDIconButton:
                            text: ":|"
                            icon: "emoticon-neutral"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_dessert.text, 0)
                            md_bg_color: 1, 1, 0, 0.5

                        MDIconButton:
                            #text: ":)"
                            icon: "emoticon-happy"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: root.dish_vote(dish_name_dessert.text, 1)
                            md_bg_color: 0, 1, 0, 0.5

                MDBoxLayout:
                    orientation: "horizontal"
                    padding: 50
                    MDRaisedButton:
                        text: "Additional Feedback"
                        size_hint_x: 0.1
                        size_hint_y: 1
                        on_release: app.root.current = 'feedback_screen'

<Login_screen>:
    name: 'login_screen'
    
    FitImage:
        source: "assets/program/background.jpg"
        # change the size of the image
        size_hint: 1, 1
        # change the position of the image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    MDCard:
        size_hint: 0.5, 0.9
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        orientation: 'vertical'
        padding: 10
        md_bg_color: 1, 1, 1, 0.3
        # change the color of the card

        MDBoxLayout:
            orientation: "vertical"
            padding: "8dp"

            MDLabel:
                text: "Login"
                halign: "center"
                font_style: "H4"

            # show a text field to display inputed code
            MDTextField:
                id: code
                hint_text: "Code"
                helper_text: "Enter the code"
                helper_text_mode: "on_focus"
                password: True
                icon_right: 'eye-off'
                icon_right_color: app.theme_cls.primary_color
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint_x: None
                width: 200

            MDBoxLayout:
                orientation: "vertical"
                padding: 10

                MDBoxLayout:
                    orientation: "horizontal"
                    padding: 10
                    opacity: 1

                    MDRaisedButton:
                        text: "1"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "1"

                    MDRaisedButton:
                        text: "2"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "2"

                    MDRaisedButton:
                        text: "3"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "3"
                
                MDBoxLayout:
                    orientation: "horizontal"
                    padding: 10

                    MDRaisedButton:
                        text: "4"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "4"

                    MDRaisedButton:
                        text: "5"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "5"

                    MDRaisedButton:
                        text: "6"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "6"

                MDBoxLayout:
                    orientation: "horizontal"
                    padding: 10

                    MDRaisedButton:
                        text: "7"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "7"

                    MDRaisedButton:
                        text: "8"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "8"

                    MDRaisedButton:
                        text: "9"
                        size_hint_x: 0.33
                        size_hint_y: 1
                        on_release: code.text += "9"

                MDBoxLayout:
                    MDBoxLayout:
                        orientation: "horizontal"
                        padding: 10

                        MDRaisedButton:
                            text: "Clear"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            # on execute the function clear
                            on_release: code.text = ""
                        
                        MDRaisedButton:
                            text: "0"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            on_release: code.text += "0"

                        MDRaisedButton:
                            text: "Enter"
                            size_hint_x: 0.33
                            size_hint_y: 1
                            # on release root.enter(code.text) and erase code.text
                            on_release: 
                                root.enter(code.text)
                                code.text = ""

            MDLabel:
                id: error_label
                text: ''
                halign: 'center'
                theme_text_color: 'Custom'
                text_color: 1, 0, 0, 1
                font_style: 'H6'
                size_hint_y: None


<Feedback_screen>:
    name: 'feedback_screen'
    FitImage:
        source: "assets/program/background.jpg"
        # change the size of the image
        size_hint: 1, 1
        # change the position of the image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    MDCard:
        size_hint: 0.9, 0.9
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        orientation: 'vertical'
        padding: 10
        md_bg_color: 1, 1, 1, 0.3
        # change the color of the card

        MDBoxLayout:
            orientation: "vertical"
            padding: "8dp"
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            MDLabel:
                text: "Additional Feedback"
                halign: "center"
                font_style: "H4"

            MDBoxLayout:
                orientation: "vertical"
                padding: 10

                MDLabel:
                    text: "Title"
                    halign: "center"
                    font_style: "H5"
                
                MDTextField:
                    id: feedback_title
                    hint_text: "Enter title"
                    helper_text: "Enter title"
                    helper_text_mode: "on_focus"
                    icon_right: "android"
                    icon_right_color: app.theme_cls.primary_color
                    required: True

                MDLabel:
                    text: "Dishes"
                    halign: "center"
                    font_style: "H5"

                MDTextField:
                    id: dish_name
                    name: "dish"
                    #min lenght 1
                    min_text_length: 1
                    on_text: root.search_dish(self.text)
                    hint_text: "Enter dish"

                #self.ids.dishes.add_widget(MDDropDownItem(text=dish.name))
            

                MDBoxLayout:
                    id: dish_suggestion
                    orientation: "horizontal"
                    size_hint_y: None
                    size_hint_x: 1
                    padding: 12



                MDLabel:
                    text: "Description"
                    halign: "center"
                    font_style: "H5"
                

                MDTextField:
                    id: description
                    hint_text: "Enter description"
                    helper_text: "Enter description"
                    helper_text_mode: "on_focus"
                    icon_right: "android"
                    icon_right_color: app.theme_cls.primary_color
                    required: True
                
            MDBoxLayout:
                orientation: "horizontal"
                padding: 10

                MDRaisedButton:
                    text: "Submit"
                    size_hint_x: 0.1
                    size_hint_y: 0.3
                    on_release: root.submit_feedback(feedback_title.text, dish_name.text, description.text)
                MDFlatButton:
                    text: "Cancel"
                    size_hint_x: 0.1
                    size_hint_y: 0.3
                    on_release: app.root.current = 'main_screen'
                
<Config_screen>:
    name: 'config_screen'
    FitImage:
        source: "assets/program/background.jpg"
        # change the size of the image
        size_hint: 1, 1
        # change the position of the image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    MDCard:
        size_hint: 0.9, 0.9
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        orientation: 'vertical'
        padding: 10
        md_bg_color: 1, 1, 1, 0.3
        # change the color of the card

        MDBoxLayout:
            orientation: "vertical"
            padding: "8dp"
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            halign: "center"

            MDLabel:
                text: "Configuration"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                font_style: "H4"
                halign: "center"

            MDRaisedButton:
                text: "See Statistics"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: app.root.current = 'statistics_screen'
                size_hint_x: 0.95
                size_hint_y: 1
            MDRaisedButton:
                text: "See Feedback"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: app.root.current = 'feedback_view_screen'
                size_hint_x: 0.95
                size_hint_y: 1
            
            MDRaisedButton:
                text: "Exit App"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: app.stop() 
                size_hint_x: 0.95
                size_hint_y: 1

            MDRaisedButton:
                text: "Back"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: app.root.current = 'main_screen'
                size_hint_x: 0.95
                size_hint_y: 1


<Statistics_screen>:
    FitImage:
        source: "assets/program/background.jpg"
        # change the size of the image
        size_hint: 1, 1
        # change the position of the image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    MDBoxLayout:
        pos_hint: {"center_x":.5, "center_y":.05}
        size_hint: 1,.1
        MDBoxLayout:
            size_hint: .5,1
            orientation: "horizontal"
            MDRaisedButton:
                id : back
                text:"Back"
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}
                on_press:
                    root.manager.current = "config_screen"
                    root.manager.transition.direction = "left"
            MDRaisedButton:
                text: "Erase Selected Statistics"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: root.reset_selected_statistics()
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}
                md_bg_color: "#e63946"

<Feedback_view_screen>:
    FitImage:
        source: "assets/program/background.jpg"
        # change the size of the image
        size_hint: 1, 1
        # change the position of the image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}


    MDLabel:
        id: error_label_feedback
        text: "Feedback"
        #set to the top midle of the screen
        pos_hint: {'center_x': 0.5, 'center_y': .9}
        font_style: "H4"
        halign: "center"
        color: 1, 1, 1, 1

    MDBoxLayout:
        #put it on the top midle of the screen
        pos_hint: {"center_x":.5, "center_y":.05}
        size_hint: 1,.1
        MDBoxLayout:
            size_hint: .5,1
            orientation: "horizontal"
            MDRaisedButton:
                id : back
                text:"Back"
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}
                on_press:
                    root.manager.current = "config_screen"
                    root.manager.transition.direction = "left"
            MDRaisedButton:
                text: "Open Selected Feedback"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: root.open_selected_feedback()
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}

            MDRaisedButton:
                text: "Mark Selected Feedback as Read"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: root.make_selected_feedback_read()
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}

            MDRaisedButton:
                text: "Erase Selected Statistics"
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release: root.delete_selected_feedback()
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}
                md_bg_color: "#e63946"



    MDBoxLayout:
        orientation: "vertical"
        padding: "8dp"
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        MDLabel:
            text: "Feedback"
            halign: "center"
            font_style: "H4"

            #show a table with the feedback

<Feedback_consultation_screen>:
    FitImage:
        source: "assets/program/background.jpg"
        # change the size of the image
        size_hint: 1, 1
        # change the position of the image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    MDCard:
        size_hint: 0.5, 0.9
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        orientation: 'vertical'
        padding: 10
        md_bg_color: 1, 1, 1, 0.3

        MDLabel:
            text: "Feedback Consultation"
            halign: "center"
            font_style: "H4"
            bold: True

        MDLabel:
            text: "Title"
            halign: "center"
            font_style: "H5"
            bold: True
        MDLabel:
            id: feedback_consultation_title
            text: "Title"
            halign: "center"
            font_style: "H5"
            md_bg_color: 1, 1, 1, 0.4
        
        MDLabel:
            text: "Date"
            halign: "center"
            font_style: "H5"
            bold: True
        MDLabel:
            id: feedback_consultation_date
            text: "Date"
            halign: "center"
            font_style: "H6"
            italic: True
            md_bg_color: 1, 1, 1, 0.4

            
        MDLabel:
            text: "Selected Dishes"
            halign: "center"
            font_style: "H5"
            bold: True
        MDLabel:
            id: feedback_consultation_selected_dishes
            text: "Selected Dishes"
            halign: "center"
            font_style: "H6"
            italic: True
            md_bg_color: 1, 1, 1, 0.4

        MDLabel:
            text: "Description"
            halign: "center"
            font_style: "H5"
            bold: True
        MDLabel:
            id: feedback_consultation_description
            text: "Description"
            halign: "center"
            font_style: "H5"
            italic: True
            md_bg_color: 1, 1, 1, 0.4

        # add three buttons (back, delete, mark as read)

        MDBoxLayout:
            orientation: "horizontal"
            padding: "8dp"
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            MDIconButton:
                icon: "keyboard-return"
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}
                on_press:
                    root.manager.current = "feedback_view_screen"
                    root.manager.transition.direction = "left"
                
            MDIconButton:
                icon: "delete"
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}
                md_bg_color: "#e63946"
                on_press:
                    root.delete_feedback()
            MDIconButton:
                icon: "check"
                size_hint_x: 0.95
                size_hint_y: 1
                pos_hint: {"center_x":.5, "center_y":.5}
                md_bg_color: 1, 0.8, 0, 1 
                on_press:
                    root.mark_as_read()
            


